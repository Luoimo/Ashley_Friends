import{n as B,e as o,j as m,p as I,r as i,c as _,o as r,g as u,a as g,f as v,F as y,l as L,w as f,h,t as N,s as M,q as U}from"./index-DWdODraP.js";const q=()=>B.get("/tags/tagListAll"),F={class:"selected-tags"},j={style:{margin:"16px"}},R={__name:"SearchPage",setup(D){const l=o(""),n=o([]),d=o(0),s=o([]);o(s);const p=m(()=>l.value?s.value.filter(t=>t.children.some(e=>e.text.includes(l.value))):s.value),c=m({get(){return s.value.flatMap(e=>e.children).filter(e=>n.value.includes(e.id))},set(t){n.value=t.map(e=>e.id)}});I(async()=>{const{data:t}=await q();s.value=t});const x=()=>{console.log(c.value)},k=()=>{l.value=""},C=t=>{n.value=n.value.filter(e=>e!==t)},b=()=>{c.value.length===0?M("请选择标签"):U.push({path:"/searchResult",query:{selectedTags:c.value.flatMap(t=>t.text)}})};return(t,e)=>{const T=i("van-search"),V=i("van-tag"),w=i("van-tree-select"),S=i("van-empty"),A=i("van-button");return r(),_(y,null,[u("div",null,[g(T,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),placeholder:"搜索可选标签...",onSearch:x,onCancel:k},null,8,["modelValue"]),u("div",F,[(r(!0),_(y,null,L(c.value,a=>(r(),v(V,{key:a.id,type:"primary",plain:"",closeable:"",onClose:E=>C(a.id)},{default:f(()=>[h(N(a.text),1)]),_:2},1032,["onClose"]))),128))]),p.value.length?(r(),v(w,{key:0,"active-id":n.value,"onUpdate:activeId":e[1]||(e[1]=a=>n.value=a),"main-active-index":d.value,"onUpdate:mainActiveIndex":e[2]||(e[2]=a=>d.value=a),items:p.value},null,8,["active-id","main-active-index","items"])):(r(),v(S,{key:1,description:"暂无数据"}))]),u("div",j,[g(A,{round:"",block:"",type:"primary","native-type":"submit",onClick:b},{default:f(()=>[...e[3]||(e[3]=[h(" 提交 ",-1)])]),_:1})])],64)}}};export{R as default};
