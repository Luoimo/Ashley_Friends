import{a as h}from"./team-BNmmgQOH.js";import{d as q,e as p,j as f,r as n,f as x,o as c,w as r,a as o,k as Y,g as B,h as D,s as P,q as S}from"./index-BR_c7jHa.js";import{h as $}from"./moment-BLMuvzoS.js";const M={style:{margin:"16px"}},E=q({__name:"TeamAddPage",setup(O){const l=p({name:"",description:void 0,maxNum:4,expireTime:null,password:void 0,status:null}),m=p(!1),u=p(!1),d=[{text:"公开",value:0},{text:"私有",value:1},{text:"加密",value:2}],i=f(()=>{const t=d.find(e=>e.value===l.value.status);return t?t.text:""}),v=f(()=>l.value.expireTime?l.value.expireTime.slice(0,10):""),w=t=>t.length>=6&&t.length<=20,V=t=>{l.value.expireTime=$(t).format("YYYY-MM-DD"),m.value=!1,console.log(l.value.expireTime)},g=t=>{l.value.status=t.selectedOptions[0].value,u.value=!1},_=async()=>{await h(l.value).then(()=>{P({type:"primary",message:"创建成功"})}),S.push("/team")};return(t,e)=>{const s=n("van-field"),b=n("van-stepper"),k=n("van-calendar"),y=n("van-picker"),C=n("van-popup"),T=n("van-button"),N=n("van-cell-group"),U=n("van-form");return c(),x(U,{onSubmit:_,"label-width":"100px"},{default:r(()=>[o(N,{inset:"",style:{"margin-top":"16px"}},{default:r(()=>[o(s,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),name:"name",label:"队伍名称",placeholder:"请输入队伍名称",maxlength:"10",rules:[{required:!0,message:"请输入队伍名称"}]},null,8,["modelValue"]),o(s,{modelValue:l.value.description,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.description=a),name:"description",label:"队伍描述",placeholder:"请输入队伍描述",type:"textarea",rows:"3",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),o(s,{label:"队伍人数",rules:[{required:!0,message:"请输入队伍人数"}]},{input:r(()=>[o(b,{modelValue:l.value.maxNum,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.maxNum=a),min:1,max:5},null,8,["modelValue"])]),_:1}),o(s,{clickable:"",name:"expireTime",label:"过期时间",placeholder:"请选择过期时间",modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),onClick:e[4]||(e[4]=a=>m.value=!0),rules:[{required:!0,message:"请选择过期时间"}]},null,8,["modelValue"]),o(k,{show:m.value,"onUpdate:show":e[5]||(e[5]=a=>m.value=a),onConfirm:V},null,8,["show"]),o(s,{readonly:"",clickable:"",name:"status",label:"队伍状态",placeholder:"请选择状态",modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value=a),onClick:e[7]||(e[7]=a=>u.value=!0),rules:[{required:!0,message:"请选择状态"}]},null,8,["modelValue"]),o(C,{show:u.value,"onUpdate:show":e[9]||(e[9]=a=>u.value=a),position:"bottom"},{default:r(()=>[o(y,{columns:d,onConfirm:g,onCancel:e[8]||(e[8]=a=>u.value=!1)})]),_:1},8,["show"]),l.value.status===2?(c(),x(s,{key:0,modelValue:l.value.password,"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.password=a),name:"password",label:"队伍密码",placeholder:"请输入6-20位密码",type:"password",maxlength:"20",rules:[{required:!0,message:"请输入6-20位密码"},{validator:w,message:"密码必须在6-20位之间"}]},null,8,["modelValue","rules"])):Y("",!0),B("div",M,[o(T,{round:"",block:"",type:"primary","native-type":"submit"},{default:r(()=>[...e[11]||(e[11]=[D(" 创建队伍 ",-1)])]),_:1})])]),_:1})]),_:1})}}});export{E as default};
