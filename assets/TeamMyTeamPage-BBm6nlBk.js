import{b as c,q as D,d as N}from"./team-BNmmgQOH.js";import{d as q,e as z,b as B,p as L,r as l,f as d,o as r,w as a,c as M,F as U,l as I,a as p,k as v,h as s,v as _,t as m,s as g,q as S}from"./index-BR_c7jHa.js";const O=q({__name:"TeamMyTeamPage",setup(V){const i=z([]),y=B().currentUser,k=["公开","私有","加密"];L(async()=>{await c().then(n=>{i.value=n.data})});const T=async n=>{const e={teamId:n.id};await D(e).then(()=>{g({type:"primary",message:"退出成功"})}),await c().then(o=>{i.value=o.data})},w=async n=>{const e={teamId:n.id};await N(e).then(()=>{g({type:"primary",message:"解散成功"})}),await c().then(o=>{i.value=o.data})},x=n=>{S.push({path:"/team/modify",query:{teamId:n.id}})};return(n,e)=>{const o=l("van-tag"),u=l("van-button"),C=l("van-card"),b=l("van-empty"),h=l("van-config-provider");return r(),d(h,{"theme-vars":{cardBackground:"white"}},{default:a(()=>[i.value.length>0?(r(!0),M(U,{key:0},I(i.value,t=>(r(),d(C,{key:t.id,title:t.name,thumb:t.creator?.avatarUrl,desc:t.description?t.description.slice(0,20)+"...":"",style:{"box-shadow":"2px 2px 2px rgba(0, 0, 0, 0.1)"}},{tags:a(()=>[p(o,{plain:"",type:"primary"},{default:a(()=>[s("最大人数: "+m(t.maxNum),1)]),_:2},1024),p(o,{plain:"",type:"success"},{default:a(()=>[s(" 到期时间: "+m(t.expireTime?.toLocaleString().slice(0,10)),1)]),_:2},1024),p(o,{plain:"",type:"warning"},{default:a(()=>[s(m(k[t.status]),1)]),_:2},1024)]),footer:a(()=>[p(u,{size:"small",type:"danger",onClick:f=>T(t)},{default:a(()=>[...e[0]||(e[0]=[s("退出队伍",-1)])]),_:2},1032,["onClick"]),t.creator.id===_(y).id?(r(),d(u,{key:0,size:"small",type:"danger",onClick:f=>w(t)},{default:a(()=>[...e[1]||(e[1]=[s("解散队伍",-1)])]),_:2},1032,["onClick"])):v("",!0),t.creator.id===_(y).id?(r(),d(u,{key:1,size:"small",type:"primary",onClick:f=>x(t)},{default:a(()=>[...e[2]||(e[2]=[s("修改队伍",-1)])]),_:2},1032,["onClick"])):v("",!0),p(u,{size:"small",type:"default"},{default:a(()=>[...e[3]||(e[3]=[s("查看详情",-1)])]),_:1})]),_:2},1032,["title","thumb","desc"]))),128)):(r(),d(b,{key:1},{default:a(()=>[...e[4]||(e[4]=[s("暂未加入队伍",-1)])]),_:1}))]),_:1})}}});export{O as default};
