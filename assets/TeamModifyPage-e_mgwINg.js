import{d as S,i as M,e as d,p as Y,j as c,r as n,f as x,o as g,w as r,a as l,k as B,g as D,h as P,s as $,q as O}from"./index-DWdODraP.js";import{g as R,m as j}from"./team-Dp-tdgBZ.js";import{h as z}from"./moment-BLMuvzoS.js";const I={style:{margin:"16px"}},G=S({__name:"TeamModifyPage",setup(L){const w=M(),p={id:Number(w.query.teamId),pageNum:1,pageSize:10},t=d({name:"",description:void 0,maxNum:4,expireTime:null,password:void 0,status:null});Y(async()=>{await R(p).then(o=>{o.data.length>0&&(t.value=o.data[0])})});const m=d(!1),u=d(!1),i=[{text:"公开",value:0},{text:"私有",value:1},{text:"加密",value:2}],v=c(()=>{const o=i.find(e=>e.value===t.value.status);return o?o.text:""}),f=c(()=>t.value.expireTime?t.value.expireTime.slice(0,10):""),V=o=>o.length>=6&&o.length<=20,y=o=>{t.value.expireTime=z(o).format("YYYY-MM-DD"),m.value=!1},b=o=>{t.value.status=o.selectedOptions[0].value,u.value=!1},_=async()=>{await j(p.id,t.value).then(()=>{$({type:"primary",message:"修改成功"})}),O.push("/team/myTeam")};return(o,e)=>{const s=n("van-field"),k=n("van-stepper"),T=n("van-calendar"),C=n("van-picker"),N=n("van-popup"),h=n("van-button"),q=n("van-cell-group"),U=n("van-form");return g(),x(U,{onSubmit:_,"label-width":"100px"},{default:r(()=>[l(q,{inset:"",style:{"margin-top":"16px"}},{default:r(()=>[l(s,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.name=a),name:"name",label:"队伍名称",placeholder:"请输入队伍名称",maxlength:"10",rules:[{required:!0,message:"请输入队伍名称"}]},null,8,["modelValue"]),l(s,{modelValue:t.value.description,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.description=a),name:"description",label:"队伍描述",placeholder:"请输入队伍描述",type:"textarea",rows:"3",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),l(s,{label:"队伍人数",rules:[{required:!0,message:"请输入队伍人数"}]},{input:r(()=>[l(k,{modelValue:t.value.maxNum,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.maxNum=a),min:1,max:5},null,8,["modelValue"])]),_:1}),l(s,{clickable:"",name:"expireTime",label:"过期时间",placeholder:"请选择过期时间",modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value=a),onClick:e[4]||(e[4]=a=>m.value=!0),rules:[{required:!0,message:"请选择过期时间"}]},null,8,["modelValue"]),l(T,{show:m.value,"onUpdate:show":e[5]||(e[5]=a=>m.value=a),onConfirm:y},null,8,["show"]),l(s,{readonly:"",clickable:"",name:"status",label:"队伍状态",placeholder:"请选择状态",modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=a=>v.value=a),onClick:e[7]||(e[7]=a=>u.value=!0),rules:[{required:!0,message:"请选择状态"}]},null,8,["modelValue"]),l(N,{show:u.value,"onUpdate:show":e[9]||(e[9]=a=>u.value=a),position:"bottom"},{default:r(()=>[l(C,{columns:i,onConfirm:b,onCancel:e[8]||(e[8]=a=>u.value=!1)})]),_:1},8,["show"]),t.value.status===2?(g(),x(s,{key:0,modelValue:t.value.password,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.password=a),name:"password",label:"队伍密码",placeholder:"请输入6-20位密码",type:"password",maxlength:"20",rules:[{required:!0,message:"请输入6-20位密码"},{validator:V,message:"密码必须在6-20位之间"}]},null,8,["modelValue","rules"])):B("",!0),D("div",I,[l(h,{round:"",block:"",type:"primary","native-type":"submit"},{default:r(()=>[...e[11]||(e[11]=[P(" 修改队伍 ",-1)])]),_:1})])]),_:1})]),_:1})}}});export{G as default};
